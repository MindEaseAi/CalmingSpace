<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Calm Space</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #0b1020;
  font-family: system-ui, sans-serif;
  color: white;
  overflow: hidden;
}

.container {
  position: relative;
  z-index: 2;
  max-width: 500px;
  margin: 15vh auto;
  text-align: center;
  padding: 20px;
}

h1 {
  font-weight: 500;
  margin-bottom: 10px;
}

p {
  opacity: 0.85;
}

textarea {
  width: 100%;
  height: 80px;
  border-radius: 25px;
  border: none;
  padding: 16px;
  font-size: 16px;
  resize: none;
  outline: none;
}

button {
  margin-top: 15px;
  padding: 14px 34px;
  border-radius: 30px;
  border: none;
  background: #7faaff;
  color: #000;
  font-size: 16px;
  cursor: pointer;
}

.bubble {
  width: 90px;
  height: 90px;
  margin: 0 auto 25px;
  border-radius: 50%;
  background: radial-gradient(circle, #bcdcff, #6f8cff);
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-20px) scale(1.08); }
  100% { transform: translateY(0) scale(1); }
}

#aurora {
  position: fixed;
  inset: 0;
  z-index: 1;
  background:
    linear-gradient(120deg, #5faaff55, #8affc155, #c58cff55);
  filter: blur(90px);
  animation: aurora 25s linear infinite;
}

@keyframes aurora {
  0% { transform: translateX(-40%); }
  50% { transform: translateX(40%); }
  100% { transform: translateX(-40%); }
}
</style>
</head>

<body>

<div id="aurora"></div>

<div class="container">
  <div class="bubble" id="bubble"></div>

  <h1>Calm Space</h1>
  <p>Share how you feel. A new calm begins.</p>

  <textarea id="emotion" placeholder="I feel overwhelmed..."></textarea>
  <br>
  <button onclick="startCalm()">Begin Calm</button>
</div>

<script>
let audioCtx;
let source;
let gain;

function startCalm() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }

  if (source) {
    source.stop();
  }

  // Create soothing ambient noise
  const bufferSize = audioCtx.sampleRate * 2;
  const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
  const data = buffer.getChannelData(0);

  for (let i = 0; i < bufferSize; i++) {
    data[i] = (Math.random() * 2 - 1) * 0.03;
  }

  source = audioCtx.createBufferSource();
  source.buffer = buffer;
  source.loop = true;

  const filter = audioCtx.createBiquadFilter();
  filter.type = "lowpass";
  filter.frequency.value = 800 + Math.random() * 400;

  gain = audioCtx.createGain();
  gain.gain.value = 0.25;

  source.connect(filter);
  filter.connect(gain);
  gain.connect(audioCtx.destination);

  source.start();

  resetBubble();
}

function resetBubble() {
  const bubble = document.getElementById("bubble");
  bubble.style.animation = "none";
  bubble.offsetHeight;
  bubble.style.animation = "float 6s ease-in-out infinite";
}
</script>

</body>
</html>
